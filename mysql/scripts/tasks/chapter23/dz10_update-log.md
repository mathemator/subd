# Ð›Ð¾Ð³ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… 

## Ð’Ð½ÐµÑÑ‘Ð½Ð½Ñ‹Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ

1. **Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° `purchase` - Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ð°:**
    - Ð”Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸ÑÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ ÑÐ²ÑÐ·Ð°Ð½Ð½Ñ‹Ñ… ÑÑ‚Ð¾Ð»Ð±Ñ†Ð¾Ð² Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ ÑƒÐ´Ð°Ð»Ñ‘Ð½ Ð²Ð½ÐµÑˆÐ½Ð¸Ð¹ ÐºÐ»ÑŽÑ‡ `fk_purchase_customer`.
    - Ð˜Ð·Ð¼ÐµÐ½Ñ‘Ð½ Ñ‚Ð¸Ð¿ Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑÑ‚Ð¾Ð»Ð±Ñ†Ð° `id` Ð½Ð° `BIGINT`.
    - Ð˜Ð·Ð¼ÐµÐ½Ñ‘Ð½ Ñ‚Ð¸Ð¿ Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑÑ‚Ð¾Ð»Ð±Ñ†Ð° `customer_id` Ð½Ð° `BIGINT` Ð´Ð»Ñ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ñ ÑÐ²ÑÐ·Ð°Ð½Ð½Ð¾Ð¼Ñƒ.
    - ÐžÐ±Ñ€Ð°Ñ‚Ð½Ð¾ Ð²Ð½ÐµÐ´Ñ€Ñ‘Ð½ Ð²Ð½ÐµÑˆÐ½Ð¸Ð¹ ÐºÐ»ÑŽÑ‡ `fk_purchase_customer`, ÑÑÑ‹Ð»Ð°ÑŽÑ‰Ð¸Ð¹ÑÑ Ð½Ð° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¹ `customer(id)`.
    - Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ ÑÑ‚Ð¾Ð»Ð±ÐµÑ† `metadata` Ñ‚Ð¸Ð¿Ð° `JSON` Ñ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ð¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸ÐµÐ¼ `NULL`.

2. **Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° `customer`:**
    - Ð˜Ð·Ð¼ÐµÐ½Ñ‘Ð½ Ñ‚Ð¸Ð¿ Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑÑ‚Ð¾Ð»Ð±Ñ†Ð° `id` Ð½Ð° `BIGINT `.

3. **Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° `product`:**
    - Ð Ð°ÑÑˆÐ¸Ñ€ÐµÐ½ ÑÑ‚Ð¾Ð»Ð±ÐµÑ† `price` Ð½Ð° `DECIMAL(12, 2) NOT NULL` Ð´Ð»Ñ Ð´Ð¾Ñ€Ð¾Ð³Ð¸Ñ… Ð¿Ð¾ÐºÑƒÐ¿Ð¾Ðº.
    - Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ ÑÑ‚Ð¾Ð»Ð±ÐµÑ† `attributes` Ñ‚Ð¸Ð¿Ð° `JSON` Ñ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ð¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸ÐµÐ¼ `NULL` Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð»ÑŒÐ½Ñ‹Ñ… Ð°Ñ‚Ñ€Ð¸Ð±ÑƒÑ‚Ð¾Ð² Ñ‚Ð¾Ð²Ð°Ñ€Ð°.

## ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð½Ð° Ð²Ñ‹Ð±Ð¾Ñ€ÐºÑƒ Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ JSON

```sql
-- Ð’Ñ‹Ð±Ð¾Ñ€ÐºÐ° Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð¾Ð², Ñƒ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… Ð² JSON-Ð°Ñ‚Ñ€Ð¸Ð±ÑƒÑ‚Ðµ ÑƒÐºÐ°Ð·Ð°Ð½ Ñ†Ð²ÐµÑ‚ "ÐºÑ€Ð°ÑÐ½Ñ‹Ð¹"
SELECT *
FROM product
WHERE JSON_EXTRACT(attributes, '$.color') = 'red';
```
### Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
| **id** | **name** | **price** | **manufacturer_id** | **supplier_id** | **attributes**                                      |
|--------|----------|-----------|---------------------|-----------------|-----------------------------------------------------|
| 5      | T-shirt  | 19.99     | 1                   | 1               | {"size": "M", "color": "red", "material": "cotton"} |

## Ð”Ñ€ÑƒÐ³Ð¾Ð¹ Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð¿Ð¾Ð¸ÑÐº Ð¿Ð¾ Ð°Ñ‚Ñ€Ð¸Ð±ÑƒÑ‚Ñƒ
```sql
-- Ð’Ñ‹Ð±Ð¾Ñ€ÐºÐ° ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ñ… Ñ†Ð²ÐµÑ‚Ð¾Ð² Ð´Ð»Ñ Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð² Ñ Ð¸Ð¼ÐµÐ½ÐµÐ¼ "T-shirt"
SELECT DISTINCT JSON_UNQUOTE(attributes->'$.color') AS color
FROM product
WHERE name = 'T-shirt'
AND attributes->>'$.color' IS NOT NULL;
```
### Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
| **color** |
|-----------|
| red       |
ðŸ˜º


